<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Voci</title>
    <title th:replace="fragments/bootstrap :: header"></title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>

<!-- outer container -->
<div class="container-fluid m-0 p-0 text-light main-bg-color" style="height: 100vh">
    <div class="row p-0 m-0 h-100">

        <!-- left column -->
        <div th:replace="fragments/navs :: navLeft"></div>

        <!-- right column -->
        <div class="d-flex flex-column col-md-10 col-sm-9 h-100">
            <div class="h-100 row secondary-bg-color">

                <!-- main-container -->
                <div class="col-lg-9 overflow-auto flex-grow-1 d-flex justify-content-center p-4 text-center width-100">
                    <div class="d-flex flex-column justify-content-center outer-container">
                        <div class="d-flex flex-column main-bg-color rounded p-4">
                            <div class="d-flex flex-row justify-content-center">
                                <h5 class="pb-2">CREATE A CALL</h5>
                                <i class="material-icons text-light ml-5" data-toggle="toolip"
                                   title="Choose your contacts or invite strangers! After clicking submit you can copy a generated link and send it to all your friends to join you!">info</i>
                            </div>

                            <form th:action="@{/call}" th:method="post">

                                <div th:if="${contactSelection.isEmpty()}" class="pb-2" style="white-space: nowrap">You
                                    have not selected any Contacts.
                                </div>

                                <!-- select contacts -->
                                <div th:each="selected : ${contactSelection}"
                                     class="flex-row d-flex btn text-light secondary-bg-color rounded p-2 m-2"
                                     data-toggle="modal" data-target="#selectContactModal">
                                    <div th:text="${selected.userName}" class="flex-grow-1"></div>
                                </div>

                                <a class="flex-row d-flex btn text-light secondary-bg-color rounded p-2 m-2"
                                   data-toggle="modal" data-target="#selectContactModal">
                                    <div class="flex-grow-1">Select <span
                                            th:unless="${contactSelection.isEmpty()}">more </span>Contacts?
                                    </div>
                                    <i class="material-icons">contact_page</i>
                                </a>

                                <button class="btn btn-outline-success">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- contacts-list-->
                <div th:replace="fragments/navs :: navRight"></div>

                <!-- Modal for selecting contacts -->
                <div th:fragment="selectContactModal" class="modal fade text-light" id="selectContactModal"
                     tabindex="-1" role="dialog" aria-labelledby="Select Contacts"
                     aria-hidden="true">
                    <div class="modal-dialog " role="document">
                        <div class="modal-content main-bg-color">
                            <form class="" th:action="@{/main/selectContact}" th:method="post">
                                <div class="modal-header border-0">
                                    <h5 class="modal-title">Select Contact</h5>
                                    <button type="button" class="close " data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body border-top border-bottom secondary-border-color">

                                    <div class="flex-row d-flex justify-content-center">
                                        <!-- select contacts -->
                                        <select th:name="selection">
                                            <option selected="selected" value="">--</option>
                                            <option th:value="${contact.userName}" th:each="contact : ${contactsList}"
                                                    th:unless="${contactSelection.contains(contact)}"
                                                    th:text="${contact.userName}"></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="modal-footer border-0">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button class="btn btn-outline-success">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>


</html>