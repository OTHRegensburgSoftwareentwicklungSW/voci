<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Voci</title>
    <title th:replace="fragments/bootstrap :: header"></title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>

<!-- outer container -->
<div class="container-fluid m-0 p-0 text-light main-bg-color" style="height: 100vh">
    <div class="row p-0 m-0 h-100">

        <!-- left column -->
        <div class="pl-3 pr-3 m-0 d-flex flex-column col-md-2 col-sm-3 h-100 justify-content-center">
            <header class="text-center p-0 m-0 secondary-border-color border-bottom">
                <h1 class="m-3 display-4" th:href="@{/main}">VOCI</h1>
            </header>
            <div class="flex-grow-1 overflow-auto">

                <!-- content of left column -->
                <ul class="nav nav-pills pt-4 flex-column">

                    <li class="nav-item">
                        <a class="nav-link active text-center" th:href="@{/main}">
                            Home
                        </a>
                    </li>

                    <!-- inner navbar for room-list-->
                    <li class="nav-item mt-4 pt-3 border-top secondary-border-color">
                        <h5 class="pb-2">ROOMS</h5>
                        <div th:each="room: ${roomsList}"
                             class="btn btn-block text-center text-light secondary-bg-color rounded" th:href="@{/main}">
                            <span th:text="${room.roomName}" class=""></span>
                        </div>
                        <p th:if="${roomsList.isEmpty()}" class="text-warning text-center">
                            You don't have any Rooms, yet.
                        </p>

                    </li>
                    <li class="nav-item pt-3 mt-1 text-center">
                        <a class="btn btn-outline-primary text-center" data-toggle="modal" data-target="#addRoomModal">
                            Add Room
                        </a>
                    </li>

                </ul>
            </div>
        </div>

        <!-- right column -->
        <div class="d-flex flex-column col-md-10 col-sm-9 h-100">
            <div class="h-100 row secondary-bg-color">

                <!-- main-container -->
                <div class="col-lg-9 overflow-auto flex-grow-1 p-4 justify-content-center text-center">
                    <div class="d-flex flex-row justify-content-center">
                        <h5 class="pb-2">CREATE A CALL</h5>
                        <i class="material-icons text-light ml-5" data-toggle="toolip"
                           title="Choose your contacts or invite strangers! After clicking submit you can copy a generated link and send it to all your friends to join you!">info</i>
                    </div>
                    <form th:action="@{/call}" th:method="post">

                    </form>
                </div>

                <!-- contacts-list-->
                <div class="p-0 m-0 col-lg-3 border-left main-border-color flex-column d-flex h-100">
                    <h5 class="pb-2 m-3 mt-4">CONTACTS</h5>

                    <div class="overflow-auto flex-grow-1">
                        <div th:each="contact: ${contactsList}" class="">
                            <form class="d-flex flex-row p-2 m-1 border-bottom main-border-color"
                                  th:action="@{/main/deleteContact/(contactName=${contact.userName})}"
                                  th:method="delete">

                                <p th:text="${contact.userName}" class="col-11 m-0 p-0"></p>
                                <button type="submit" class="btn col-1 m-0 p-0 text-danger"><i
                                        class="material-icons">delete</i></button>
                            </form>
                        </div>
                        <p th:if="${contactsList.isEmpty()}" class="text-warning text-center">
                            You don't have any Contacts, yet.
                        </p>
                        <div class="flex-row justify-content-center text-center p-3">
                            <p th:text="${errorMsg}" class="text-danger"></p>
                            <a class="btn btn-outline-primary" data-toggle="modal" data-target="#addContactModal">
                                Add Contact
                            </a>
                        </div>
                    </div>

                    <!-- logout button -->
                    <div class="text-center p-4">
                        <a th:href="@{/logout}" class="btn btn-outline-danger">Logout</a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Modal for adding room -->
<div th:replace="fragments/modal :: addRoomModal"></div>

<!-- Modal for adding contact -->
<div th:replace="fragments/modal :: addContactModal"></div>

</body>


</html>